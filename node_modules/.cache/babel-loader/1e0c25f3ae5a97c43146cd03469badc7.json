{"ast":null,"code":"var _jsxFileName = \"/home/fusion/workspace/frontend/src/ui/pages/userProfile/UserProfile.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport userApi from '../../../api/userApi';\nimport { useAppDispatch, useAppSelector } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\nimport UserPassword from './components/UserPassword';\nimport UserInfo from './components/UserInfo';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\nimport UserProfileWrapper from './UserProfile.styles';\nimport defaultAvatar from '../../images/default-avatar.png';\nimport changeAvatarButton from '../../images/change-avatar-button.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserProfile = () => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const [isChangeUserInfo, setIsChangeUserInfo] = useState(false);\n  const [isChangePassword, setIsChangePassword] = useState(false);\n  const user = useAppSelector(state => state.userReducer.user);\n\n  const toggleChangePassword = () => {\n    setIsChangePassword(!isChangePassword);\n  };\n\n  const toggleChangeUserInfo = () => {\n    setIsChangeUserInfo(!isChangeUserInfo);\n  };\n\n  const handleAvatar = event => {\n    if (event.target.files) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n\n      reader.onloadend = async () => {\n        try {\n          const base64String = reader.result;\n          const encoded = JSON.stringify(base64String);\n          const response = await userApi.uploadAvatar({\n            img: encoded\n          });\n          dispatch(setUser(response.data.user));\n        } catch (error) {\n          toast.error('Sorry, we were unable to upload the avatar now...', {\n            autoClose: 3000\n          });\n        }\n      };\n\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(CommonWrapper, {\n    children: /*#__PURE__*/_jsxDEV(UserProfileWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"avatar__img\",\n          src: user.avatar || defaultAvatar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"ava\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: changeAvatarButton,\n            className: \"avatar__button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            hidden: true,\n            type: \"file\",\n            name: \"ava\",\n            id: \"ava\",\n            onChange: handleAvatar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"title__name\",\n            children: \"Personal information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: () => setIsChangeUserInfo(!isChangeUserInfo),\n            className: \"title__change\",\n            children: \"Change information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(UserInfo, {\n          isChangeUserInfo: isChangeUserInfo,\n          toggleChangeUserInfo: toggleChangeUserInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title title__description\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"title__name\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"title__change\",\n            onClick: () => toggleChangePassword(),\n            children: \"Change password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(UserPassword, {\n          isChangePassword: !isChangePassword,\n          toggleChangePassword: toggleChangePassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserProfile, \"9gOeJ8USnYHNgTV+svPGS1WWd4I=\", false, function () {\n  return [useAppDispatch, useAppSelector];\n});\n\n_c = UserProfile;\nexport default UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useState","toast","userApi","useAppDispatch","useAppSelector","setUser","UserPassword","UserInfo","CommonWrapper","UserProfileWrapper","defaultAvatar","changeAvatarButton","UserProfile","dispatch","isChangeUserInfo","setIsChangeUserInfo","isChangePassword","setIsChangePassword","user","state","userReducer","toggleChangePassword","toggleChangeUserInfo","handleAvatar","event","target","files","file","reader","FileReader","onloadend","base64String","result","encoded","JSON","stringify","response","uploadAvatar","img","data","error","autoClose","readAsDataURL","avatar"],"sources":["/home/fusion/workspace/frontend/src/ui/pages/userProfile/UserProfile.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nimport userApi from '../../../api/userApi';\nimport { useAppDispatch, useAppSelector } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\nimport { User } from '../../../types';\n\nimport UserPassword from './components/UserPassword';\nimport UserInfo from './components/UserInfo';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\n\nimport UserProfileWrapper from './UserProfile.styles';\n\nimport defaultAvatar from '../../images/default-avatar.png';\nimport changeAvatarButton from '../../images/change-avatar-button.png';\n\nconst UserProfile = () => {\n  const dispatch = useAppDispatch();\n  const [isChangeUserInfo, setIsChangeUserInfo] = useState(false);\n  const [isChangePassword, setIsChangePassword] = useState(false);\n  const user = useAppSelector((state) => state.userReducer.user) as User;\n\n  const toggleChangePassword = () => {\n    setIsChangePassword(!isChangePassword);\n  };\n\n  const toggleChangeUserInfo = () => {\n    setIsChangeUserInfo(!isChangeUserInfo);\n  };\n\n  const handleAvatar = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const base64String = reader.result;\n          const encoded = JSON.stringify(base64String);\n          const response = await userApi.uploadAvatar({ img: encoded });\n          dispatch(setUser(response.data.user));\n        } catch (error) {\n          toast.error('Sorry, we were unable to upload the avatar now...', { autoClose: 3000 });\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <CommonWrapper>\n      <UserProfileWrapper>\n        <div className=\"avatar\">\n          <img\n            className=\"avatar__img\"\n            src={user.avatar || defaultAvatar}\n          />\n          <label htmlFor=\"ava\">\n            <img\n              src={changeAvatarButton}\n              className=\"avatar__button\"\n            />\n            <input\n              hidden\n              type=\"file\"\n              name=\"ava\"\n              id=\"ava\"\n              onChange={handleAvatar}\n            />\n          </label>\n        </div>\n        <div className=\"user-info\">\n          <div className=\"title\">\n            <p className=\"title__name\">\n              Personal information\n            </p>\n            <p\n              onClick={() => setIsChangeUserInfo(!isChangeUserInfo)}\n              className=\"title__change\"\n            >\n              Change information\n            </p>\n          </div>\n          <UserInfo\n            isChangeUserInfo={isChangeUserInfo}\n            toggleChangeUserInfo={toggleChangeUserInfo}\n          />\n          <div className=\"title title__description\">\n            <p className=\"title__name\">\n              Password\n            </p>\n            <p\n              className=\"title__change\"\n              onClick={() => toggleChangePassword()}\n            >\n              Change password\n            </p>\n          </div>\n          <UserPassword\n            isChangePassword={!isChangePassword}\n            toggleChangePassword={toggleChangePassword}\n          />\n        </div>\n      </UserProfileWrapper>\n    </CommonWrapper >\n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}