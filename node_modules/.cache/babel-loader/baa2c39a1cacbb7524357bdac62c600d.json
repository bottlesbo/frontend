{"ast":null,"code":"import _asyncToGenerator from\"/home/fusion/workspace/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/fusion/workspace/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/fusion/workspace/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{toast}from'react-toastify';import userApi from'../../../api/userApi';import{useAppDispatch,useAppSelector}from'../../../store';import{setUser}from'../../../store/userReducer';import UserPassword from'./components/UserPassword';import UserInfo from'./components/UserInfo';import CommonWrapper from'../../components/CommonWrapper.styles';import UserProfileWrapper from'./UserProfile.styles';import defaultAvatar from'../../images/default-avatar.png';import changeAvatarButton from'../../images/change-avatar-button.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserProfile=function UserProfile(){var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isChangeUserInfo=_useState2[0],setIsChangeUserInfo=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isChangePassword=_useState4[0],setIsChangePassword=_useState4[1];var user=useAppSelector(function(state){return state.userReducer.user;});var toggleChangePassword=function toggleChangePassword(){setIsChangePassword(!isChangePassword);};var toggleChangeUserInfo=function toggleChangeUserInfo(){setIsChangeUserInfo(!isChangeUserInfo);};var handleAvatar=function handleAvatar(event){if(event.target.files){var file=event.target.files[0];var reader=new FileReader();reader.onloadend=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var base64String,encoded,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;base64String=reader.result;encoded=JSON.stringify(base64String);_context.next=5;return userApi.uploadAvatar({img:encoded});case 5:response=_context.sent;dispatch(setUser(response.data.user));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);toast.error('Sorry, we were unable to upload the avatar now...',{autoClose:3000});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));reader.readAsDataURL(file);}};return/*#__PURE__*/_jsx(CommonWrapper,{children:/*#__PURE__*/_jsxs(UserProfileWrapper,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"avatar\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"avatar__img\",src:user.avatar||defaultAvatar}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"ava\",children:[/*#__PURE__*/_jsx(\"img\",{src:changeAvatarButton,className:\"avatar__button\"}),/*#__PURE__*/_jsx(\"input\",{hidden:true,type:\"file\",name:\"ava\",id:\"ava\",onChange:handleAvatar})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title__name\",children:\"Personal information\"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setIsChangeUserInfo(!isChangeUserInfo);},className:\"title__change\",children:\"Change information\"})]}),/*#__PURE__*/_jsx(UserInfo,{isChangeUserInfo:isChangeUserInfo,toggleChangeUserInfo:toggleChangeUserInfo}),/*#__PURE__*/_jsxs(\"div\",{className:\"title title__description\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title__name\",children:\"Password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"title__change\",onClick:function onClick(){return toggleChangePassword();},children:\"Change password\"})]}),/*#__PURE__*/_jsx(UserPassword,{isChangePassword:!isChangePassword,toggleChangePassword:toggleChangePassword})]})]})});};export default UserProfile;","map":{"version":3,"names":["React","useState","toast","userApi","useAppDispatch","useAppSelector","setUser","UserPassword","UserInfo","CommonWrapper","UserProfileWrapper","defaultAvatar","changeAvatarButton","UserProfile","dispatch","isChangeUserInfo","setIsChangeUserInfo","isChangePassword","setIsChangePassword","user","state","userReducer","toggleChangePassword","toggleChangeUserInfo","handleAvatar","event","target","files","file","reader","FileReader","onloadend","base64String","result","encoded","JSON","stringify","uploadAvatar","img","response","data","error","autoClose","readAsDataURL","avatar"],"sources":["/home/fusion/workspace/frontend/src/ui/pages/userProfile/UserProfile.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nimport userApi from '../../../api/userApi';\nimport { useAppDispatch, useAppSelector } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\nimport { User } from '../../../types';\n\nimport UserPassword from './components/UserPassword';\nimport UserInfo from './components/UserInfo';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\n\nimport UserProfileWrapper from './UserProfile.styles';\n\nimport defaultAvatar from '../../images/default-avatar.png';\nimport changeAvatarButton from '../../images/change-avatar-button.png';\n\nconst UserProfile = () => {\n  const dispatch = useAppDispatch();\n  const [isChangeUserInfo, setIsChangeUserInfo] = useState(false);\n  const [isChangePassword, setIsChangePassword] = useState(false);\n  const user = useAppSelector((state) => state.userReducer.user) as User;\n\n  const toggleChangePassword = () => {\n    setIsChangePassword(!isChangePassword);\n  };\n\n  const toggleChangeUserInfo = () => {\n    setIsChangeUserInfo(!isChangeUserInfo);\n  };\n\n  const handleAvatar = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files) {\n      const file = event.target.files[0];\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const base64String = reader.result;\n          const encoded = JSON.stringify(base64String);\n          const response = await userApi.uploadAvatar({ img: encoded });\n          dispatch(setUser(response.data.user));\n        } catch (error) {\n          toast.error('Sorry, we were unable to upload the avatar now...', { autoClose: 3000 });\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <CommonWrapper>\n      <UserProfileWrapper>\n        <div className=\"avatar\">\n          <img\n            className=\"avatar__img\"\n            src={user.avatar || defaultAvatar}\n          />\n          <label htmlFor=\"ava\">\n            <img\n              src={changeAvatarButton}\n              className=\"avatar__button\"\n            />\n            <input\n              hidden\n              type=\"file\"\n              name=\"ava\"\n              id=\"ava\"\n              onChange={handleAvatar}\n            />\n          </label>\n        </div>\n        <div className=\"user-info\">\n          <div className=\"title\">\n            <p className=\"title__name\">\n              Personal information\n            </p>\n            <p\n              onClick={() => setIsChangeUserInfo(!isChangeUserInfo)}\n              className=\"title__change\"\n            >\n              Change information\n            </p>\n          </div>\n          <UserInfo\n            isChangeUserInfo={isChangeUserInfo}\n            toggleChangeUserInfo={toggleChangeUserInfo}\n          />\n          <div className=\"title title__description\">\n            <p className=\"title__name\">\n              Password\n            </p>\n            <p\n              className=\"title__change\"\n              onClick={() => toggleChangePassword()}\n            >\n              Change password\n            </p>\n          </div>\n          <UserPassword\n            isChangePassword={!isChangePassword}\n            toggleChangePassword={toggleChangePassword}\n          />\n        </div>\n      </UserProfileWrapper>\n    </CommonWrapper >\n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}