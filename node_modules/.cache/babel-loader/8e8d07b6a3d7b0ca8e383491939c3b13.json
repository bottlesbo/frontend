{"ast":null,"code":"var _jsxFileName = \"/home/father/bookstore/frontend/src/ui/pages/auth/SignUp.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useFormik } from 'formik';\nimport { useNavigate } from 'react-router-dom';\nimport { AxiosError } from 'axios';\nimport YupString from 'yup/lib/string';\nimport YupObject from 'yup/lib/object';\nimport YupRef from 'yup/lib/Reference';\nimport authAPI from '../../../api/authApi';\nimport { routePath } from '../../../constants';\nimport { useAppDispatch } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\nimport CommonButton from '../../components/CommonButton';\nimport CommonInputField from '../../components/CommonInputField';\nimport Wrapper from './Auth.styles';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\nimport man from '../../images/man.png';\nimport hide from '../../images/hide.png';\nimport mail from '../../images/mail.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst signUpValidationSchema = new YupObject().shape({\n  email: new YupString().email('Invalid email address').required('Required'),\n  password: new YupString().required('Required'),\n  passwordRepeat: new YupString().when('password', {\n    is: value => Boolean(value && value.length > 0),\n    then: new YupString().oneOf([new YupRef('password')], 'Both passwords need to be the same')\n  })\n});\n\nconst SignUpForm = () => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: '',\n      passwordRepeat: ''\n    },\n    validationSchema: signUpValidationSchema,\n    onSubmit: async values => {\n      try {\n        const response = await authAPI.signUp({\n          email: values.email,\n          password: values.password\n        });\n        dispatch(setUser(response.data.user));\n        return navigate(`${routePath.home}`);\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          var _error$response;\n\n          const status = (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status;\n\n          if (status === 403) {\n            var _error$response2;\n\n            formik.setErrors({\n              email: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.data.message\n            });\n          }\n        }\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(CommonWrapper, {\n    children: /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-wrapper\",\n        onSubmit: formik.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(CommonInputField, {\n            icon: mail,\n            name: \"email\",\n            placeholder: \"Email\",\n            fieldInputProps: formik.getFieldProps('email'),\n            error: formik !== null && formik !== void 0 && formik.touched.email ? formik === null || formik === void 0 ? void 0 : formik.errors.email : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form__text\",\n            children: \"Enter your email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CommonInputField, {\n            icon: hide,\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"Password\",\n            fieldInputProps: formik.getFieldProps('password'),\n            error: formik !== null && formik !== void 0 && formik.touched.password ? formik === null || formik === void 0 ? void 0 : formik.errors.password : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form__text\",\n            children: \"Enter your password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CommonInputField, {\n            icon: hide,\n            type: \"password\",\n            name: \"passwordRepeat\",\n            placeholder: \"Password replay\",\n            fieldInputProps: formik.getFieldProps('passwordRepeat'),\n            error: formik !== null && formik !== void 0 && formik.touched.passwordRepeat ? formik === null || formik === void 0 ? void 0 : formik.errors.passwordRepeat : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form__text\",\n            children: \"Repeat your password without errors\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CommonButton, {\n          size: \"permanent\",\n          text: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"image\",\n        src: man\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignUpForm, \"tNRmRg2AExNoZ41jY7+RmLciLxg=\", false, function () {\n  return [useAppDispatch, useNavigate, useFormik];\n});\n\n_c = SignUpForm;\nexport default SignUpForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpForm\");","map":{"version":3,"names":["React","useFormik","useNavigate","AxiosError","YupString","YupObject","YupRef","authAPI","routePath","useAppDispatch","setUser","CommonButton","CommonInputField","Wrapper","CommonWrapper","man","hide","mail","signUpValidationSchema","shape","email","required","password","passwordRepeat","when","is","value","Boolean","length","then","oneOf","SignUpForm","dispatch","navigate","formik","initialValues","validationSchema","onSubmit","values","response","signUp","data","user","home","error","status","setErrors","message","handleSubmit","getFieldProps","touched","errors"],"sources":["/home/father/bookstore/frontend/src/ui/pages/auth/SignUp.tsx"],"sourcesContent":["import React from 'react';\nimport { useFormik } from 'formik';\nimport { useNavigate } from 'react-router-dom';\nimport { AxiosError } from 'axios';\n\nimport YupString from 'yup/lib/string';\nimport YupObject from 'yup/lib/object';\nimport YupRef from 'yup/lib/Reference';\n\nimport authAPI from '../../../api/authApi';\nimport { routePath } from '../../../constants';\nimport { useAppDispatch } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\n\nimport CommonButton from '../../components/CommonButton';\nimport CommonInputField from '../../components/CommonInputField';\nimport Wrapper from './Auth.styles';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\n\nimport man from '../../images/man.png';\nimport hide from '../../images/hide.png';\nimport mail from '../../images/mail.png';\n\nconst signUpValidationSchema = new YupObject().shape({\n  email: new YupString().email('Invalid email address').required('Required'),\n  password: new YupString().required('Required'),\n  passwordRepeat: new YupString().when('password', {\n    is: (value: string) => (Boolean(value && value.length > 0)),\n    then: new YupString().oneOf(\n      [new YupRef('password')],\n      'Both passwords need to be the same',\n    ),\n  }),\n});\n\nconst SignUpForm = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: '',\n      passwordRepeat: '',\n    },\n    validationSchema: signUpValidationSchema,\n    onSubmit: async (values) => {\n      try {\n        const response = await authAPI.signUp({\n          email: values.email,\n          password: values.password,\n        });\n        dispatch(setUser(response.data.user));\n\n        return navigate(`${routePath.home}`);\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          const status = error.response?.status;\n          if (status === 403) {\n            formik.setErrors({\n              email: error.response?.data.data.message,\n            });\n          }\n        }\n      }\n    },\n  });\n\n  return (\n    <CommonWrapper>\n      <Wrapper>\n        <form\n          className=\"form-wrapper\"\n          onSubmit={formik.handleSubmit}\n        >\n          <h1 className=\"title\">\n            Sign Up\n          </h1>\n\n          <div className=\"input-wrapper\">\n            <CommonInputField\n              icon={mail}\n              name=\"email\"\n              placeholder=\"Email\"\n              fieldInputProps={formik.getFieldProps('email')}\n              error={formik?.touched.email ? formik?.errors.email : ''}\n            />\n            <p className=\"form__text\">\n              Enter your email\n            </p>\n\n            <CommonInputField\n              icon={hide}\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              fieldInputProps={formik.getFieldProps('password')}\n              error={formik?.touched.password ? formik?.errors.password : ''}\n            />\n            <p className=\"form__text\">\n              Enter your password\n            </p>\n\n            <CommonInputField\n              icon={hide}\n              type=\"password\"\n              name=\"passwordRepeat\"\n              placeholder=\"Password replay\"\n              fieldInputProps={formik.getFieldProps('passwordRepeat')}\n              error={formik?.touched.passwordRepeat ? formik?.errors.passwordRepeat : ''}\n            />\n            <p className=\"form__text\">\n              Repeat your password without errors\n            </p>\n          </div>\n          <CommonButton\n            size=\"permanent\"\n            text=\"Sign up\"\n          />\n        </form>\n        <img\n          className=\"image\"\n          src={man}\n        />\n      </Wrapper>\n    </CommonWrapper>\n  );\n};\n\nexport default SignUpForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}