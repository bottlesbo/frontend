{"ast":null,"code":"var _jsxFileName = \"/home/fusion/workspace/frontend/src/ui/pages/home/components/PriceRangeFilter.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\nimport classnames from 'classnames';\nimport useQuery from '../../../../utils/useQuery';\nimport PriceFilterWrapper from '../styles/PriceFilter.styles';\nimport arrowUpIcon from '../../../images/arrow-up.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PriceFilter = props => {\n  _s();\n\n  const [, setParams] = useQuery();\n  const [minVal, setMinVal] = useState(props.min);\n  const [maxVal, setMaxVal] = useState(props.max);\n  const minValRef = useRef(null);\n  const maxValRef = useRef(null);\n  const range = useRef(null);\n  const getPercent = useCallback(value => Math.round((value - props.min) / (props.max - props.min) * 100), [props.min, props.max]);\n  useEffect(() => {\n    if (maxValRef.current) {\n      const minPercent = getPercent(minVal);\n      const maxPercent = getPercent(+maxValRef.current.value);\n\n      if (range.current) {\n        range.current.style.left = `${minPercent}%`;\n        range.current.style.width = `${maxPercent - minPercent}%`;\n      }\n    }\n  }, [minVal, getPercent]);\n  useEffect(() => {\n    if (minValRef.current) {\n      const minPercent = getPercent(+minValRef.current.value);\n      const maxPercent = getPercent(maxVal);\n\n      if (range.current) {\n        range.current.style.width = `${maxPercent - minPercent}%`;\n      }\n    }\n  }, [maxVal, getPercent]);\n\n  const setPriceRange = () => {\n    setParams({\n      priceFrom: minVal.toString(),\n      priceTo: maxVal.toString()\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(PriceFilterWrapper, {\n    onClick: e => {\n      e.stopPropagation();\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: arrowUpIcon,\n      className: \"arrow-up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: props.min,\n      max: props.max,\n      value: minVal,\n      ref: minValRef,\n      onChange: event => {\n        const value = Math.min(+event.target.value, maxVal - 1);\n        setMinVal(value);\n        event.target.value = value.toString();\n      },\n      onMouseUp: setPriceRange,\n      className: classnames('thumb thumb--zindex-3', {\n        'thumb--zindex-5': minVal > props.max - 100\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: props.min,\n      max: props.max,\n      value: maxVal,\n      ref: maxValRef,\n      onChange: event => {\n        const value = Math.max(+event.target.value, minVal + 1);\n        setMaxVal(value);\n        event.target.value = value.toString();\n      },\n      onMouseUp: setPriceRange,\n      className: \"thumb thumb--zindex-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slider\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slider__track\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: range,\n        className: \"slider__range\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slider__left-value\",\n        children: `$ ${minVal}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slider__right-value\",\n        children: `$ ${maxVal}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PriceFilter, \"i6KmKs9iP4yNU2M5KFGZ4ElY9JM=\", false, function () {\n  return [useQuery];\n});\n\n_c = PriceFilter;\nexport default PriceFilter;\n\nvar _c;\n\n$RefreshReg$(_c, \"PriceFilter\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useRef","classnames","useQuery","PriceFilterWrapper","arrowUpIcon","PriceFilter","props","setParams","minVal","setMinVal","min","maxVal","setMaxVal","max","minValRef","maxValRef","range","getPercent","value","Math","round","current","minPercent","maxPercent","style","left","width","setPriceRange","priceFrom","toString","priceTo","e","stopPropagation","event","target"],"sources":["/home/fusion/workspace/frontend/src/ui/pages/home/components/PriceRangeFilter.tsx"],"sourcesContent":["import React, { ChangeEvent, FC, useCallback, useEffect, useState, useRef } from 'react';\nimport classnames from 'classnames';\n\nimport useQuery from '../../../../utils/useQuery';\nimport { QuerySearchOptions } from '../../../../types';\n\nimport PriceFilterWrapper from '../styles/PriceFilter.styles';\n\nimport arrowUpIcon from '../../../images/arrow-up.png';\n\ninterface MultiRangeSliderProps {\n  min: number;\n  max: number;\n}\n\nconst PriceFilter: FC<MultiRangeSliderProps> = (props) => {\n  const [, setParams] = useQuery<QuerySearchOptions>();\n\n  const [minVal, setMinVal] = useState(props.min);\n  const [maxVal, setMaxVal] = useState(props.max);\n  const minValRef = useRef<HTMLInputElement>(null);\n  const maxValRef = useRef<HTMLInputElement>(null);\n  const range = useRef<HTMLDivElement>(null);\n\n  const getPercent = useCallback(\n    (value: number) => Math.round(((value - props.min) / (props.max - props.min)) * 100),\n    [props.min, props.max],\n  );\n\n  useEffect(() => {\n    if (maxValRef.current) {\n      const minPercent = getPercent(minVal);\n      const maxPercent = getPercent(+maxValRef.current.value);\n\n      if (range.current) {\n        range.current.style.left = `${minPercent}%`;\n        range.current.style.width = `${maxPercent - minPercent}%`;\n      }\n    }\n  }, [minVal, getPercent]);\n\n  useEffect(() => {\n    if (minValRef.current) {\n      const minPercent = getPercent(+minValRef.current.value);\n      const maxPercent = getPercent(maxVal);\n\n      if (range.current) {\n        range.current.style.width = `${maxPercent - minPercent}%`;\n      }\n    }\n  }, [maxVal, getPercent]);\n\n  const setPriceRange: React.MouseEventHandler<HTMLDivElement> = () => {\n    setParams({\n      priceFrom: minVal.toString(),\n      priceTo: maxVal.toString(),\n    });\n  };\n\n  return (\n    <PriceFilterWrapper\n      onClick={(e) => {\n        e.stopPropagation();\n      }}\n    >\n      <img\n        src={arrowUpIcon}\n        className=\"arrow-up\"\n      />\n\n      <input\n        type=\"range\"\n        min={props.min}\n        max={props.max}\n        value={minVal}\n        ref={minValRef}\n        onChange={(event: ChangeEvent<HTMLInputElement>) => {\n          const value = Math.min(+event.target.value, maxVal - 1);\n          setMinVal(value);\n          event.target.value = value.toString();\n        }}\n        onMouseUp={setPriceRange}\n        className={classnames('thumb thumb--zindex-3', {\n          'thumb--zindex-5': minVal > props.max - 100,\n        })}\n      />\n      <input\n        type=\"range\"\n        min={props.min}\n        max={props.max}\n        value={maxVal}\n        ref={maxValRef}\n        onChange={(event: ChangeEvent<HTMLInputElement>) => {\n          const value = Math.max(+event.target.value, minVal + 1);\n          setMaxVal(value);\n          event.target.value = value.toString();\n        }}\n        onMouseUp={setPriceRange}\n        className=\"thumb thumb--zindex-4\"\n      />\n\n      <div className=\"slider\">\n        <div className=\"slider__track\" />\n        <div ref={range} className=\"slider__range\" />\n        <div className=\"slider__left-value\" >\n          {`$ ${minVal}`}\n        </div>\n        <div className=\"slider__right-value\" >\n          {`$ ${maxVal}`}\n        </div>\n      </div>\n    </PriceFilterWrapper>\n  );\n};\n\nexport default PriceFilter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}