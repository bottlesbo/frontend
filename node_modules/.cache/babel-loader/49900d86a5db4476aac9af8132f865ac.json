{"ast":null,"code":"import _slicedToArray from\"/home/father/bookstore/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAppSelector}from'../../../../store';import useQuery from'../../../../utils/useQuery';import PaginationWrapper from'../styles/PaginationBlock.styles';import arrow from'../../../images/page-arrow.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PaginationBlock=function PaginationBlock(){var _useQuery=useQuery(),_useQuery2=_slicedToArray(_useQuery,2),parsedParams=_useQuery2[0],setParams=_useQuery2[1];var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var totalPages=useAppSelector(function(state){return state.bookReducer.pages;});useEffect(function(){if(!currentPage){if(!parsedParams.page){setCurrentPage(1);}else{setCurrentPage(+parsedParams.page);}}},[currentPage,setCurrentPage]);useEffect(function(){if(!currentPage){return;}if(totalPages>0&&(currentPage>totalPages||!parsedParams.page)){setCurrentPage(1);}setParams({page:currentPage.toString()});},[currentPage,totalPages]);var turnPageBack=function turnPageBack(){if(!currentPage||currentPage<2)return;setCurrentPage(currentPage+1);};var turnPageForward=function turnPageForward(){if(!currentPage||currentPage>=totalPages)return;setCurrentPage(currentPage+1);};var turnPage=function turnPage(page){setCurrentPage(page);};return/*#__PURE__*/_jsx(\"nav\",{children:totalPages>1&&/*#__PURE__*/_jsxs(PaginationWrapper,{children:[/*#__PURE__*/_jsx(\"img\",{src:arrow,className:\"pagination__arrow pagination__back\",alt:\"pagination__back pagination__arrow\",onClick:turnPageBack}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination__pages\",children:new Array(totalPages).fill(1).map(function(page,index){var style='pagination__page';if(index+1===currentPage){style='pagination__page pagination__page-current';}return/*#__PURE__*/_jsx(\"div\",{className:style,onClick:function onClick(){return turnPage(index+1);}},index);})}),/*#__PURE__*/_jsx(\"img\",{src:arrow,className:\"pagination__arrow\",alt:\"pagination__arrow\",onClick:turnPageForward})]})});};export default PaginationBlock;","map":{"version":3,"names":["React","useEffect","useState","useAppSelector","useQuery","PaginationWrapper","arrow","PaginationBlock","parsedParams","setParams","currentPage","setCurrentPage","totalPages","state","bookReducer","pages","page","toString","turnPageBack","turnPageForward","turnPage","Array","fill","map","index","style"],"sources":["/home/father/bookstore/frontend/src/ui/pages/home/components/PaginationBlock.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { useAppSelector } from '../../../../store';\n\nimport useQuery from '../../../../utils/useQuery';\nimport { QuerySearchOptions } from '../../../../types';\n\nimport PaginationWrapper from '../styles/PaginationBlock.styles';\n\nimport arrow from '../../../images/page-arrow.png';\n\nconst PaginationBlock = () => {\n  const [parsedParams, setParams] = useQuery<QuerySearchOptions>();\n  const [currentPage, setCurrentPage] = useState<number>();\n  const totalPages = useAppSelector((state) => state.bookReducer.pages);\n\n  useEffect(() => {\n    if (!currentPage) {\n      if (!parsedParams.page) {\n        setCurrentPage(1);\n      } else {\n        setCurrentPage(+parsedParams.page);\n      }\n    }\n  }, [currentPage, setCurrentPage]);\n\n  useEffect(() => {\n    if (!currentPage) {\n      return;\n    }\n\n    if (totalPages > 0 && (currentPage > totalPages || !parsedParams.page)) {\n      setCurrentPage(1);\n    }\n    setParams({ page: currentPage.toString() });\n  }, [currentPage, totalPages]);\n\n  const turnPageBack = () => {\n    if (!currentPage || currentPage < 2) return;\n    setCurrentPage(currentPage + 1);\n  };\n\n  const turnPageForward = () => {\n    if (!currentPage || currentPage >= totalPages) return;\n    setCurrentPage(currentPage + 1);\n  };\n\n  const turnPage = (page: number) => {\n    setCurrentPage(page);\n  };\n\n  return (\n    <nav>\n      {totalPages > 1 &&\n        <PaginationWrapper>\n          <img\n            src={arrow}\n            className=\"pagination__arrow pagination__back\"\n            alt=\"pagination__back pagination__arrow\"\n            onClick={turnPageBack}\n          />\n          <div className=\"pagination__pages\">\n            {new Array(totalPages).fill(1).map((page, index) => {\n              let style = 'pagination__page';\n              if (index + 1 === currentPage) {\n                style = 'pagination__page pagination__page-current';\n              }\n              return (\n                <div\n                  key={index}\n                  className={style}\n                  onClick={() => turnPage(index + 1)}\n                />\n              );\n            })}\n          </div>\n          <img\n            src={arrow}\n            className=\"pagination__arrow\"\n            alt=\"pagination__arrow\"\n            onClick={turnPageForward}\n          />\n        </PaginationWrapper>}\n    </nav>\n  );\n};\n\nexport default PaginationBlock;\n"],"mappings":"qHAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,OAASC,cAAT,KAA+B,mBAA/B,CAEA,MAAOC,SAAP,KAAqB,4BAArB,CAGA,MAAOC,kBAAP,KAA8B,kCAA9B,CAEA,MAAOC,MAAP,KAAkB,gCAAlB,C,wFAEA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5B,cAAkCH,QAAQ,EAA1C,wCAAOI,YAAP,eAAqBC,SAArB,eACA,cAAsCP,QAAQ,EAA9C,wCAAOQ,WAAP,eAAoBC,cAApB,eACA,GAAMC,WAAU,CAAGT,cAAc,CAAC,SAACU,KAAD,QAAWA,MAAK,CAACC,WAAN,CAAkBC,KAA7B,EAAD,CAAjC,CAEAd,SAAS,CAAC,UAAM,CACd,GAAI,CAACS,WAAL,CAAkB,CAChB,GAAI,CAACF,YAAY,CAACQ,IAAlB,CAAwB,CACtBL,cAAc,CAAC,CAAD,CAAd,CACD,CAFD,IAEO,CACLA,cAAc,CAAC,CAACH,YAAY,CAACQ,IAAf,CAAd,CACD,CACF,CACF,CARQ,CAQN,CAACN,WAAD,CAAcC,cAAd,CARM,CAAT,CAUAV,SAAS,CAAC,UAAM,CACd,GAAI,CAACS,WAAL,CAAkB,CAChB,OACD,CAED,GAAIE,UAAU,CAAG,CAAb,GAAmBF,WAAW,CAAGE,UAAd,EAA4B,CAACJ,YAAY,CAACQ,IAA7D,CAAJ,CAAwE,CACtEL,cAAc,CAAC,CAAD,CAAd,CACD,CACDF,SAAS,CAAC,CAAEO,IAAI,CAAEN,WAAW,CAACO,QAAZ,EAAR,CAAD,CAAT,CACD,CATQ,CASN,CAACP,WAAD,CAAcE,UAAd,CATM,CAAT,CAWA,GAAMM,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,GAAI,CAACR,WAAD,EAAgBA,WAAW,CAAG,CAAlC,CAAqC,OACrCC,cAAc,CAACD,WAAW,CAAG,CAAf,CAAd,CACD,CAHD,CAKA,GAAMS,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5B,GAAI,CAACT,WAAD,EAAgBA,WAAW,EAAIE,UAAnC,CAA+C,OAC/CD,cAAc,CAACD,WAAW,CAAG,CAAf,CAAd,CACD,CAHD,CAKA,GAAMU,SAAQ,CAAG,QAAXA,SAAW,CAACJ,IAAD,CAAkB,CACjCL,cAAc,CAACK,IAAD,CAAd,CACD,CAFD,CAIA,mBACE,qBACGJ,UAAU,CAAG,CAAb,eACC,MAAC,iBAAD,yBACE,YACE,GAAG,CAAEN,KADP,CAEE,SAAS,CAAC,oCAFZ,CAGE,GAAG,CAAC,oCAHN,CAIE,OAAO,CAAEY,YAJX,EADF,cAOE,YAAK,SAAS,CAAC,mBAAf,UACG,GAAIG,MAAJ,CAAUT,UAAV,EAAsBU,IAAtB,CAA2B,CAA3B,EAA8BC,GAA9B,CAAkC,SAACP,IAAD,CAAOQ,KAAP,CAAiB,CAClD,GAAIC,MAAK,CAAG,kBAAZ,CACA,GAAID,KAAK,CAAG,CAAR,GAAcd,WAAlB,CAA+B,CAC7Be,KAAK,CAAG,2CAAR,CACD,CACD,mBACE,YAEE,SAAS,CAAEA,KAFb,CAGE,OAAO,CAAE,yBAAML,SAAQ,CAACI,KAAK,CAAG,CAAT,CAAd,EAHX,EACOA,KADP,CADF,CAOD,CAZA,CADH,EAPF,cAsBE,YACE,GAAG,CAAElB,KADP,CAEE,SAAS,CAAC,mBAFZ,CAGE,GAAG,CAAC,mBAHN,CAIE,OAAO,CAAEa,eAJX,EAtBF,GAFJ,EADF,CAkCD,CA1ED,CA4EA,cAAeZ,gBAAf"},"metadata":{},"sourceType":"module"}