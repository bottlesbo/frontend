{"ast":null,"code":"var _jsxFileName = \"/home/father/bookstore/frontend/src/ui/pages/auth/SignIn.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useFormik } from 'formik';\nimport YupString from 'yup/lib/string';\nimport YupObject from 'yup/lib/object';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AxiosError } from 'axios';\nimport authAPI from '../../../api/authApi';\nimport { useAppDispatch } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\nimport { routePath } from '../../../constants';\nimport CommonInputField from '../../components/CommonInputField';\nimport CommonButton from '../../components/CommonButton';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\nimport Wrapper from './Auth.styles';\nimport man from '../../images/man.png';\nimport hide from '../../images/hide.png';\nimport mail from '../../images/mail.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst signInValidationSchema = new YupObject().shape({\n  email: new YupString().email('Invalid email address').required('Required'),\n  password: new YupString().required('Required')\n});\n\nconst SignInForm = () => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: ''\n    },\n    validationSchema: signInValidationSchema,\n    onSubmit: async values => {\n      try {\n        const response = await authAPI.signIn({\n          email: values.email,\n          password: values.password\n        });\n        dispatch(setUser(response.data.user));\n        return navigate(`${routePath.home}`);\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          var _error$response;\n\n          const status = (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status;\n\n          if (status === 403) {\n            var _error$response2;\n\n            formik.setErrors({\n              password: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.data.message\n            });\n          }\n\n          if (status === 404) {\n            var _error$response3;\n\n            formik.setErrors({\n              email: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data.data.message\n            });\n          }\n        }\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(CommonWrapper, {\n    children: /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-wrapper\",\n        onSubmit: formik.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(CommonInputField, {\n            icon: mail,\n            name: \"email\",\n            placeholder: \"Email\",\n            fieldInputProps: formik.getFieldProps('email'),\n            error: formik !== null && formik !== void 0 && formik.touched.email ? formik === null || formik === void 0 ? void 0 : formik.errors.email : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form__text\",\n            children: \"Enter your email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CommonInputField, {\n            icon: hide,\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"Password\",\n            fieldInputProps: formik.getFieldProps('password'),\n            error: formik !== null && formik !== void 0 && formik.touched.password ? formik === null || formik === void 0 ? void 0 : formik.errors.password : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form__text\",\n            children: \"Enter your password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CommonButton, {\n          size: \"permanent\",\n          text: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"question\",\n          children: [\"Don`t you have an account yet? \\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n            to: routePath.signUp,\n            className: \"button\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Let`s sign up!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"image\",\n        src: man\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignInForm, \"tNRmRg2AExNoZ41jY7+RmLciLxg=\", false, function () {\n  return [useAppDispatch, useNavigate, useFormik];\n});\n\n_c = SignInForm;\nexport default SignInForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignInForm\");","map":{"version":3,"names":["React","useFormik","YupString","YupObject","Link","useNavigate","AxiosError","authAPI","useAppDispatch","setUser","routePath","CommonInputField","CommonButton","CommonWrapper","Wrapper","man","hide","mail","signInValidationSchema","shape","email","required","password","SignInForm","dispatch","navigate","formik","initialValues","validationSchema","onSubmit","values","response","signIn","data","user","home","error","status","setErrors","message","handleSubmit","getFieldProps","touched","errors","signUp"],"sources":["/home/father/bookstore/frontend/src/ui/pages/auth/SignIn.tsx"],"sourcesContent":["import React from 'react';\nimport { useFormik } from 'formik';\nimport YupString from 'yup/lib/string';\nimport YupObject from 'yup/lib/object';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AxiosError } from 'axios';\n\nimport authAPI from '../../../api/authApi';\nimport { useAppDispatch } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\nimport { routePath } from '../../../constants';\n\nimport CommonInputField from '../../components/CommonInputField';\nimport CommonButton from '../../components/CommonButton';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\nimport Wrapper from './Auth.styles';\n\nimport man from '../../images/man.png';\nimport hide from '../../images/hide.png';\nimport mail from '../../images/mail.png';\n\nconst signInValidationSchema = new YupObject().shape({\n  email: new YupString().email('Invalid email address').required('Required'),\n  password: new YupString().required('Required'),\n});\n\nconst SignInForm = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: '',\n    },\n    validationSchema: signInValidationSchema,\n    onSubmit: async (values) => {\n      try {\n        const response = await authAPI.signIn({\n          email: values.email,\n          password: values.password,\n        });\n        dispatch(setUser(response.data.user));\n\n        return navigate(`${routePath.home}`);\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          const status = error.response?.status;\n          if (status === 403) {\n            formik.setErrors({\n              password: error.response?.data.data.message,\n            });\n          }\n          if (status === 404) {\n            formik.setErrors({\n              email: error.response?.data.data.message,\n            });\n          }\n        }\n      }\n    },\n  });\n\n  return (\n    <CommonWrapper>\n      <Wrapper>\n        <form\n          className=\"form-wrapper\"\n          onSubmit={formik.handleSubmit}\n        >\n          <h1 className=\"title\">\n            Log In\n          </h1>\n\n          <div className=\"input-wrapper\">\n            <CommonInputField\n              icon={mail}\n              name=\"email\"\n              placeholder=\"Email\"\n              fieldInputProps={formik.getFieldProps('email')}\n              error={formik?.touched.email ? formik?.errors.email : ''}\n            />\n            <p className=\"form__text\">\n              Enter your email\n            </p>\n\n            <CommonInputField\n              icon={hide}\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              fieldInputProps={formik.getFieldProps('password')}\n              error={formik?.touched.password ? formik?.errors.password : ''}\n            />\n            <p className=\"form__text\">\n              Enter your password\n            </p>\n          </div>\n          <CommonButton\n            size=\"permanent\"\n            text=\"Log In\"\n          />\n          <h4 className=\"question\">\n            Don`t you have an account yet? &nbsp;\n            <Link to={routePath.signUp} className=\"button\">\n              <span>Let`s sign up!</span>\n            </Link>\n          </h4>\n        </form>\n        <img\n          className=\"image\"\n          src={man}\n        />\n      </Wrapper>\n    </CommonWrapper>\n  );\n};\n\nexport default SignInForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}