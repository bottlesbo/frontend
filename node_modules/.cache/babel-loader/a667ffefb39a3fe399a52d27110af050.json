{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = runTests;\n\nvar _ValidationError = _interopRequireDefault(require(\"../ValidationError\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst once = cb => {\n  let fired = false;\n  return function () {\n    if (fired) return;\n    fired = true;\n    cb(...arguments);\n  };\n};\n\nfunction runTests(options, cb) {\n  let {\n    endEarly,\n    tests,\n    args,\n    value,\n    errors,\n    sort,\n    path\n  } = options;\n  let callback = once(cb);\n  let count = tests.length;\n  const nestedErrors = [];\n  errors = errors ? errors : [];\n  if (!count) return errors.length ? callback(new _ValidationError.default(errors, value, path)) : callback(null, value);\n\n  for (let i = 0; i < tests.length; i++) {\n    const test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!_ValidationError.default.isError(err)) {\n          return callback(err, value);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err, value);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push(...errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new _ValidationError.default(errors, value, path), value);\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","default","runTests","_ValidationError","_interopRequireDefault","require","obj","__esModule","once","cb","fired","options","endEarly","tests","args","errors","sort","path","callback","count","length","nestedErrors","i","test","finishTestRun","err","isError","push"],"sources":["/home/fusion/workspace/frontend/node_modules/yup/lib/util/runTests.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = runTests;\n\nvar _ValidationError = _interopRequireDefault(require(\"../ValidationError\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst once = cb => {\n  let fired = false;\n  return (...args) => {\n    if (fired) return;\n    fired = true;\n    cb(...args);\n  };\n};\n\nfunction runTests(options, cb) {\n  let {\n    endEarly,\n    tests,\n    args,\n    value,\n    errors,\n    sort,\n    path\n  } = options;\n  let callback = once(cb);\n  let count = tests.length;\n  const nestedErrors = [];\n  errors = errors ? errors : [];\n  if (!count) return errors.length ? callback(new _ValidationError.default(errors, value, path)) : callback(null, value);\n\n  for (let i = 0; i < tests.length; i++) {\n    const test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!_ValidationError.default.isError(err)) {\n          return callback(err, value);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err, value);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push(...errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new _ValidationError.default(errors, value, path), value);\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,QAAlB;;AAEA,IAAIC,gBAAgB,GAAGC,sBAAsB,CAACC,OAAO,CAAC,oBAAD,CAAR,CAA7C;;AAEA,SAASD,sBAAT,CAAgCE,GAAhC,EAAqC;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;IAAEL,OAAO,EAAEK;EAAX,CAArC;AAAwD;;AAE/F,MAAME,IAAI,GAAGC,EAAE,IAAI;EACjB,IAAIC,KAAK,GAAG,KAAZ;EACA,OAAO,YAAa;IAClB,IAAIA,KAAJ,EAAW;IACXA,KAAK,GAAG,IAAR;IACAD,EAAE,CAAC,YAAD,CAAF;EACD,CAJD;AAKD,CAPD;;AASA,SAASP,QAAT,CAAkBS,OAAlB,EAA2BF,EAA3B,EAA+B;EAC7B,IAAI;IACFG,QADE;IAEFC,KAFE;IAGFC,IAHE;IAIFd,KAJE;IAKFe,MALE;IAMFC,IANE;IAOFC;EAPE,IAQAN,OARJ;EASA,IAAIO,QAAQ,GAAGV,IAAI,CAACC,EAAD,CAAnB;EACA,IAAIU,KAAK,GAAGN,KAAK,CAACO,MAAlB;EACA,MAAMC,YAAY,GAAG,EAArB;EACAN,MAAM,GAAGA,MAAM,GAAGA,MAAH,GAAY,EAA3B;EACA,IAAI,CAACI,KAAL,EAAY,OAAOJ,MAAM,CAACK,MAAP,GAAgBF,QAAQ,CAAC,IAAIf,gBAAgB,CAACF,OAArB,CAA6Bc,MAA7B,EAAqCf,KAArC,EAA4CiB,IAA5C,CAAD,CAAxB,GAA8EC,QAAQ,CAAC,IAAD,EAAOlB,KAAP,CAA7F;;EAEZ,KAAK,IAAIsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,KAAK,CAACO,MAA1B,EAAkCE,CAAC,EAAnC,EAAuC;IACrC,MAAMC,IAAI,GAAGV,KAAK,CAACS,CAAD,CAAlB;IACAC,IAAI,CAACT,IAAD,EAAO,SAASU,aAAT,CAAuBC,GAAvB,EAA4B;MACrC,IAAIA,GAAJ,EAAS;QACP;QACA,IAAI,CAACtB,gBAAgB,CAACF,OAAjB,CAAyByB,OAAzB,CAAiCD,GAAjC,CAAL,EAA4C;UAC1C,OAAOP,QAAQ,CAACO,GAAD,EAAMzB,KAAN,CAAf;QACD;;QAED,IAAIY,QAAJ,EAAc;UACZa,GAAG,CAACzB,KAAJ,GAAYA,KAAZ;UACA,OAAOkB,QAAQ,CAACO,GAAD,EAAMzB,KAAN,CAAf;QACD;;QAEDqB,YAAY,CAACM,IAAb,CAAkBF,GAAlB;MACD;;MAED,IAAI,EAAEN,KAAF,IAAW,CAAf,EAAkB;QAChB,IAAIE,YAAY,CAACD,MAAjB,EAAyB;UACvB,IAAIJ,IAAJ,EAAUK,YAAY,CAACL,IAAb,CAAkBA,IAAlB,EADa,CACY;;UAEnC,IAAID,MAAM,CAACK,MAAX,EAAmBC,YAAY,CAACM,IAAb,CAAkB,GAAGZ,MAArB;UACnBA,MAAM,GAAGM,YAAT;QACD;;QAED,IAAIN,MAAM,CAACK,MAAX,EAAmB;UACjBF,QAAQ,CAAC,IAAIf,gBAAgB,CAACF,OAArB,CAA6Bc,MAA7B,EAAqCf,KAArC,EAA4CiB,IAA5C,CAAD,EAAoDjB,KAApD,CAAR;UACA;QACD;;QAEDkB,QAAQ,CAAC,IAAD,EAAOlB,KAAP,CAAR;MACD;IACF,CA9BG,CAAJ;EA+BD;AACF"},"metadata":{},"sourceType":"script"}