{"ast":null,"code":"import _slicedToArray from\"/home/father/bookstore/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{useAppSelector}from'../../../store';import{routePath}from'../../../constants';import useQuery from'../../../utils/useQuery';import logOut from'../../../utils/logOut';import Logo from'../../components/Logo';import AuthButtonsBlock from'./components/AuthButtonsBlock';import AuthProtector from'../../components/AuthProtector';import CommonButton from'../../components/CommonButton';import CommonWrapper from'../../components/CommonWrapper.styles';import HeaderWrapper from'./Header.styles';import logo from'../../images/logo.svg';import searchIcon from'../../images/search-icon.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var navigate=useNavigate();var location=useLocation();var _useQuery=useQuery(),_useQuery2=_slicedToArray(_useQuery,2),setParams=_useQuery2[1];var user=useAppSelector(function(state){return state.userReducer.user;});var handleSearchRequest=function handleSearchRequest(e){if(e.key==='Enter'){var value=e.currentTarget.value;setParams({value:value});if(location.pathname!==routePath.home){navigate(\"\".concat(routePath.home,\"?value=\").concat(value));}}};return/*#__PURE__*/_jsx(CommonWrapper,{children:/*#__PURE__*/_jsxs(HeaderWrapper,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header__link-block\",children:[/*#__PURE__*/_jsx(Link,{to:routePath.home,children:/*#__PURE__*/_jsx(Logo,{src:logo})}),/*#__PURE__*/_jsx(\"span\",{className:\"header__catalog-link\",onClick:logOut,hidden:!user,children:\"Log out\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"global-search\",className:\"search\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"search__icon\",src:searchIcon}),/*#__PURE__*/_jsx(\"input\",{className:\"search__input\",type:\"text\",id:\"global-search\",placeholder:\"Search\",onKeyDown:handleSearchRequest})]}),/*#__PURE__*/_jsx(AuthProtector,{children:/*#__PURE__*/_jsx(AuthButtonsBlock,{})}),/*#__PURE__*/_jsx(AuthProtector,{noAuthOnly:true,children:/*#__PURE__*/_jsx(Link,{className:\"header__link\",to:routePath.signIn,children:/*#__PURE__*/_jsx(CommonButton,{text:\"Log In / Sign Up\"})})})]})});};export default Header;","map":{"version":3,"names":["React","Link","useLocation","useNavigate","useAppSelector","routePath","useQuery","logOut","Logo","AuthButtonsBlock","AuthProtector","CommonButton","CommonWrapper","HeaderWrapper","logo","searchIcon","Header","navigate","location","setParams","user","state","userReducer","handleSearchRequest","e","key","value","currentTarget","pathname","home","signIn"],"sources":["/home/father/bookstore/frontend/src/ui/containers/Header/Header.tsx"],"sourcesContent":["import React from 'react';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\n\nimport { useAppSelector } from '../../../store';\nimport { QuerySearchOptions } from '../../../types';\nimport { routePath } from '../../../constants';\nimport useQuery from '../../../utils/useQuery';\nimport logOut from '../../../utils/logOut';\n\nimport Logo from '../../components/Logo';\nimport AuthButtonsBlock from './components/AuthButtonsBlock';\nimport AuthProtector from '../../components/AuthProtector';\nimport CommonButton from '../../components/CommonButton';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\nimport HeaderWrapper from './Header.styles';\n\nimport logo from '../../images/logo.svg';\nimport searchIcon from '../../images/search-icon.png';\n\nconst Header = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [, setParams] = useQuery<QuerySearchOptions>();\n  const user = useAppSelector((state) => state.userReducer.user);\n\n  const handleSearchRequest: React.KeyboardEventHandler<HTMLInputElement> = (e) => {\n    if (e.key === 'Enter') {\n      const value = e.currentTarget.value;\n      setParams({ value });\n      if (location.pathname !== routePath.home) {\n        navigate(`${routePath.home}?value=${value}`);\n      }\n    }\n  };\n\n  return (\n    <CommonWrapper>\n      <HeaderWrapper >\n        <div className=\"header__link-block\">\n          <Link to={routePath.home}>\n            <Logo src={logo} />\n          </Link>\n          <span\n            className=\"header__catalog-link\"\n            onClick={logOut}\n            hidden={!user}\n          >\n            Log out\n          </span>\n        </div>\n        <label\n          htmlFor=\"global-search\"\n          className=\"search\"\n        >\n          <img\n            className=\"search__icon\"\n            src={searchIcon}\n          />\n          <input\n            className=\"search__input\"\n            type=\"text\"\n            id=\"global-search\"\n            placeholder=\"Search\"\n            onKeyDown={handleSearchRequest}\n          />\n        </label>\n\n        <AuthProtector>\n          <AuthButtonsBlock />\n        </AuthProtector>\n\n        <AuthProtector noAuthOnly>\n          <Link\n            className=\"header__link\"\n            to={routePath.signIn}\n          >\n            <CommonButton text=\"Log In / Sign Up\" />\n          </Link>\n        </AuthProtector>\n      </HeaderWrapper>\n    </CommonWrapper>\n  );\n};\n\nexport default Header;\n"],"mappings":"qHAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,WAAf,CAA4BC,WAA5B,KAA+C,kBAA/C,CAEA,OAASC,cAAT,KAA+B,gBAA/B,CAEA,OAASC,SAAT,KAA0B,oBAA1B,CACA,MAAOC,SAAP,KAAqB,yBAArB,CACA,MAAOC,OAAP,KAAmB,uBAAnB,CAEA,MAAOC,KAAP,KAAiB,uBAAjB,CACA,MAAOC,iBAAP,KAA6B,+BAA7B,CACA,MAAOC,cAAP,KAA0B,gCAA1B,CACA,MAAOC,aAAP,KAAyB,+BAAzB,CACA,MAAOC,cAAP,KAA0B,uCAA1B,CACA,MAAOC,cAAP,KAA0B,iBAA1B,CAEA,MAAOC,KAAP,KAAiB,uBAAjB,CACA,MAAOC,WAAP,KAAuB,8BAAvB,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,GAAMC,SAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,SAAQ,CAAGhB,WAAW,EAA5B,CACA,cAAsBI,QAAQ,EAA9B,wCAASa,SAAT,eACA,GAAMC,KAAI,CAAGhB,cAAc,CAAC,SAACiB,KAAD,QAAWA,MAAK,CAACC,WAAN,CAAkBF,IAA7B,EAAD,CAA3B,CAEA,GAAMG,oBAAiE,CAAG,QAApEA,oBAAoE,CAACC,CAAD,CAAO,CAC/E,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuB,CACrB,GAAMC,MAAK,CAAGF,CAAC,CAACG,aAAF,CAAgBD,KAA9B,CACAP,SAAS,CAAC,CAAEO,KAAK,CAALA,KAAF,CAAD,CAAT,CACA,GAAIR,QAAQ,CAACU,QAAT,GAAsBvB,SAAS,CAACwB,IAApC,CAA0C,CACxCZ,QAAQ,WAAIZ,SAAS,CAACwB,IAAd,mBAA4BH,KAA5B,EAAR,CACD,CACF,CACF,CARD,CAUA,mBACE,KAAC,aAAD,wBACE,MAAC,aAAD,yBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAErB,SAAS,CAACwB,IAApB,uBACE,KAAC,IAAD,EAAM,GAAG,CAAEf,IAAX,EADF,EADF,cAIE,aACE,SAAS,CAAC,sBADZ,CAEE,OAAO,CAAEP,MAFX,CAGE,MAAM,CAAE,CAACa,IAHX,qBAJF,GADF,cAaE,eACE,OAAO,CAAC,eADV,CAEE,SAAS,CAAC,QAFZ,wBAIE,YACE,SAAS,CAAC,cADZ,CAEE,GAAG,CAAEL,UAFP,EAJF,cAQE,cACE,SAAS,CAAC,eADZ,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,eAHL,CAIE,WAAW,CAAC,QAJd,CAKE,SAAS,CAAEQ,mBALb,EARF,GAbF,cA8BE,KAAC,aAAD,wBACE,KAAC,gBAAD,IADF,EA9BF,cAkCE,KAAC,aAAD,EAAe,UAAU,KAAzB,uBACE,KAAC,IAAD,EACE,SAAS,CAAC,cADZ,CAEE,EAAE,CAAElB,SAAS,CAACyB,MAFhB,uBAIE,KAAC,YAAD,EAAc,IAAI,CAAC,kBAAnB,EAJF,EADF,EAlCF,GADF,EADF,CA+CD,CA/DD,CAiEA,cAAed,OAAf"},"metadata":{},"sourceType":"module"}