{"ast":null,"code":"import _asyncToGenerator from\"/home/fusion/workspace/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/fusion/workspace/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import{useFormik}from'formik';import{useNavigate}from'react-router-dom';import{AxiosError}from'axios';import YupString from'yup/lib/string';import YupObject from'yup/lib/object';import YupRef from'yup/lib/Reference';import authAPI from'../../../api/authApi';import{routePath}from'../../../constants';import{useAppDispatch}from'../../../store';import{setUser}from'../../../store/userReducer';import CommonButton from'../../components/CommonButton';import CommonInputField from'../../components/CommonInputField';import Wrapper from'./Auth.styles';import CommonWrapper from'../../components/CommonWrapper.styles';import man from'../../images/man.png';import hide from'../../images/hide.png';import mail from'../../images/mail.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var signUpValidationSchema=new YupObject().shape({email:new YupString().email('Invalid email address').required('Required'),password:new YupString().required('Required'),passwordRepeat:new YupString().when('password',{is:function is(value){return Boolean(value&&value.length>0);},then:new YupString().oneOf([new YupRef('password')],'Both passwords need to be the same')})});var SignUpForm=function SignUpForm(){var dispatch=useAppDispatch();var navigate=useNavigate();var formik=useFormik({initialValues:{email:'',password:'',passwordRepeat:''},validationSchema:signUpValidationSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var response,_error$response,status,_error$response2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authAPI.signUp({email:values.email,password:values.password});case 3:response=_context.sent;dispatch(setUser(response.data.user));return _context.abrupt(\"return\",navigate(\"\".concat(routePath.home)));case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0 instanceof AxiosError){status=(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:_error$response.status;if(status===403){formik.setErrors({email:(_error$response2=_context.t0.response)===null||_error$response2===void 0?void 0:_error$response2.data.data.message});}}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});return/*#__PURE__*/_jsx(CommonWrapper,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"form-wrapper\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(CommonInputField,{icon:mail,name:\"email\",placeholder:\"Email\",fieldInputProps:formik.getFieldProps('email'),error:formik!==null&&formik!==void 0&&formik.touched.email?formik===null||formik===void 0?void 0:formik.errors.email:''}),/*#__PURE__*/_jsx(\"p\",{className:\"form__text\",children:\"Enter your email\"}),/*#__PURE__*/_jsx(CommonInputField,{icon:hide,type:\"password\",name:\"password\",placeholder:\"Password\",fieldInputProps:formik.getFieldProps('password'),error:formik!==null&&formik!==void 0&&formik.touched.password?formik===null||formik===void 0?void 0:formik.errors.password:''}),/*#__PURE__*/_jsx(\"p\",{className:\"form__text\",children:\"Enter your password\"}),/*#__PURE__*/_jsx(CommonInputField,{icon:hide,type:\"password\",name:\"passwordRepeat\",placeholder:\"Password replay\",fieldInputProps:formik.getFieldProps('passwordRepeat'),error:formik!==null&&formik!==void 0&&formik.touched.passwordRepeat?formik===null||formik===void 0?void 0:formik.errors.passwordRepeat:''}),/*#__PURE__*/_jsx(\"p\",{className:\"form__text\",children:\"Repeat your password without errors\"})]}),/*#__PURE__*/_jsx(CommonButton,{size:\"permanent\",text:\"Sign up\"})]}),/*#__PURE__*/_jsx(\"img\",{className:\"image\",src:man})]})});};export default SignUpForm;","map":{"version":3,"names":["React","useFormik","useNavigate","AxiosError","YupString","YupObject","YupRef","authAPI","routePath","useAppDispatch","setUser","CommonButton","CommonInputField","Wrapper","CommonWrapper","man","hide","mail","signUpValidationSchema","shape","email","required","password","passwordRepeat","when","is","value","Boolean","length","then","oneOf","SignUpForm","dispatch","navigate","formik","initialValues","validationSchema","onSubmit","values","signUp","response","data","user","home","status","setErrors","message","handleSubmit","getFieldProps","touched","errors"],"sources":["/home/fusion/workspace/frontend/src/ui/pages/auth/SignUp.tsx"],"sourcesContent":["import React from 'react';\nimport { useFormik } from 'formik';\nimport { useNavigate } from 'react-router-dom';\nimport { AxiosError } from 'axios';\n\nimport YupString from 'yup/lib/string';\nimport YupObject from 'yup/lib/object';\nimport YupRef from 'yup/lib/Reference';\n\nimport authAPI from '../../../api/authApi';\nimport { routePath } from '../../../constants';\nimport { useAppDispatch } from '../../../store';\nimport { setUser } from '../../../store/userReducer';\n\nimport CommonButton from '../../components/CommonButton';\nimport CommonInputField from '../../components/CommonInputField';\nimport Wrapper from './Auth.styles';\nimport CommonWrapper from '../../components/CommonWrapper.styles';\n\nimport man from '../../images/man.png';\nimport hide from '../../images/hide.png';\nimport mail from '../../images/mail.png';\n\nconst signUpValidationSchema = new YupObject().shape({\n  email: new YupString().email('Invalid email address').required('Required'),\n  password: new YupString().required('Required'),\n  passwordRepeat: new YupString().when('password', {\n    is: (value: string) => (Boolean(value && value.length > 0)),\n    then: new YupString().oneOf(\n      [new YupRef('password')],\n      'Both passwords need to be the same',\n    ),\n  }),\n});\n\nconst SignUpForm = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: '',\n      passwordRepeat: '',\n    },\n    validationSchema: signUpValidationSchema,\n    onSubmit: async (values) => {\n      try {\n        const response = await authAPI.signUp({\n          email: values.email,\n          password: values.password,\n        });\n        dispatch(setUser(response.data.user));\n\n        return navigate(`${routePath.home}`);\n      } catch (error) {\n        if (error instanceof AxiosError) {\n          const status = error.response?.status;\n          if (status === 403) {\n            formik.setErrors({\n              email: error.response?.data.data.message,\n            });\n          }\n        }\n      }\n    },\n  });\n\n  return (\n    <CommonWrapper>\n      <Wrapper>\n        <form\n          className=\"form-wrapper\"\n          onSubmit={formik.handleSubmit}\n        >\n          <h1 className=\"title\">\n            Sign Up\n          </h1>\n\n          <div className=\"input-wrapper\">\n            <CommonInputField\n              icon={mail}\n              name=\"email\"\n              placeholder=\"Email\"\n              fieldInputProps={formik.getFieldProps('email')}\n              error={formik?.touched.email ? formik?.errors.email : ''}\n            />\n            <p className=\"form__text\">\n              Enter your email\n            </p>\n\n            <CommonInputField\n              icon={hide}\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              fieldInputProps={formik.getFieldProps('password')}\n              error={formik?.touched.password ? formik?.errors.password : ''}\n            />\n            <p className=\"form__text\">\n              Enter your password\n            </p>\n\n            <CommonInputField\n              icon={hide}\n              type=\"password\"\n              name=\"passwordRepeat\"\n              placeholder=\"Password replay\"\n              fieldInputProps={formik.getFieldProps('passwordRepeat')}\n              error={formik?.touched.passwordRepeat ? formik?.errors.passwordRepeat : ''}\n            />\n            <p className=\"form__text\">\n              Repeat your password without errors\n            </p>\n          </div>\n          <CommonButton\n            size=\"permanent\"\n            text=\"Sign up\"\n          />\n        </form>\n        <img\n          className=\"image\"\n          src={man}\n        />\n      </Wrapper>\n    </CommonWrapper>\n  );\n};\n\nexport default SignUpForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}