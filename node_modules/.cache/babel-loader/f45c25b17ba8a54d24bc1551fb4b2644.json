{"ast":null,"code":"import _asyncToGenerator from\"/home/father/bookstore/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/father/bookstore/frontend/node_modules/@babel/runtime/regenerator/index.js\";import Cookies from'js-cookie';import authApi from'../api/authApi';import constants from'../constants';var checkRefreshToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var refreshToken,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;refreshToken=Cookies.get(constants.token.refresh);if(refreshToken){_context.next=4;break;}throw new Error('No saved refresh token in cookies');case 4:_context.next=6;return authApi.checkRefresh(refreshToken);case 6:response=_context.sent;Cookies.set(constants.token.access,response.data.token);Cookies.set(constants.token.refresh,response.data.refreshToken);return _context.abrupt(\"return\",true);case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",false);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function checkRefreshToken(){return _ref.apply(this,arguments);};}();export default checkRefreshToken;","map":{"version":3,"names":["Cookies","authApi","constants","checkRefreshToken","refreshToken","get","token","refresh","Error","checkRefresh","response","set","access","data"],"sources":["/home/father/bookstore/frontend/src/utils/checkRefreshToken.ts"],"sourcesContent":["import Cookies from 'js-cookie';\n\nimport authApi from '../api/authApi';\n\nimport constants from '../constants';\n\nconst checkRefreshToken = async () => {\n  try {\n    const refreshToken = Cookies.get(constants.token.refresh);\n    if (!refreshToken) {\n      throw new Error('No saved refresh token in cookies');\n    }\n\n    const response = await authApi.checkRefresh(refreshToken);\n\n    Cookies.set(constants.token.access, response.data.token);\n    Cookies.set(constants.token.refresh, response.data.refreshToken);\n\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nexport default checkRefreshToken;\n"],"mappings":"6OAAA,MAAOA,QAAP,KAAoB,WAApB,CAEA,MAAOC,QAAP,KAAoB,gBAApB,CAEA,MAAOC,UAAP,KAAsB,cAAtB,CAEA,GAAMC,kBAAiB,0FAAG,6KAEhBC,YAFgB,CAEDJ,OAAO,CAACK,GAAR,CAAYH,SAAS,CAACI,KAAV,CAAgBC,OAA5B,CAFC,IAGjBH,YAHiB,8BAId,IAAII,MAAJ,CAAU,mCAAV,CAJc,8BAOCP,QAAO,CAACQ,YAAR,CAAqBL,YAArB,CAPD,QAOhBM,QAPgB,eAStBV,OAAO,CAACW,GAAR,CAAYT,SAAS,CAACI,KAAV,CAAgBM,MAA5B,CAAoCF,QAAQ,CAACG,IAAT,CAAcP,KAAlD,EACAN,OAAO,CAACW,GAAR,CAAYT,SAAS,CAACI,KAAV,CAAgBC,OAA5B,CAAqCG,QAAQ,CAACG,IAAT,CAAcT,YAAnD,EAVsB,gCAYf,IAZe,4FAcf,KAde,uEAAH,kBAAjBD,kBAAiB,0CAAvB,CAkBA,cAAeA,kBAAf"},"metadata":{},"sourceType":"module"}